{% extends "base.html" %}

{% block title %}Daily View - Energy Tracker{% endblock %}

{% block content %}
<h1>Daily View</h1>

<!-- Year Heatmap Strip -->
<div class="year-heatmap-section">
    <div class="year-heatmap-header">
        <button class="year-nav-btn" onclick="navigateYear(-1)" title="Previous year">&larr;</button>
        <span class="year-label" id="year-label">2026</span>
        <button class="year-nav-btn" onclick="navigateYear(1)" title="Next year">&rarr;</button>
    </div>
    <div class="year-heatmap" id="year-heatmap">
        <p class="loading">Loading...</p>
    </div>
    <div class="month-tabs" id="month-tabs"></div>
</div>

<div class="daily-layout">
    <!-- Calendar Section (Left) -->
    <div class="calendar-section">
        <div class="calendar-header">
            <button class="month-nav-btn" onclick="navigateMonth(-1)" title="Previous month">&larr;</button>
            <h2 id="month-label">February 2026</h2>
            <button class="month-nav-btn" onclick="navigateMonth(1)" title="Next month">&rarr;</button>
        </div>

        <div class="calendar-weekdays">
            <span class="calendar-weekday">Mon</span>
            <span class="calendar-weekday">Tue</span>
            <span class="calendar-weekday">Wed</span>
            <span class="calendar-weekday">Thu</span>
            <span class="calendar-weekday">Fri</span>
            <span class="calendar-weekday">Sat</span>
            <span class="calendar-weekday">Sun</span>
        </div>

        <div class="calendar-grid" id="calendar-grid">
            <p class="loading">Loading...</p>
        </div>

        <div class="calendar-legend">
            <div class="legend-item">
                <span class="legend-dot" style="background: var(--habit-pmslump-clear)"></span>
                <span>Clear</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot" style="background: var(--habit-pmslump-slump)"></span>
                <span>PM Slump</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot" style="background: var(--habit-coffee)"></span>
                <span>Coffee</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot" style="background: var(--habit-beer)"></span>
                <span>Beer</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot" style="background: var(--habit-lunch-healthy)"></span>
                <span>Healthy</span>
            </div>
        </div>

        <!-- Notable Days Panel -->
        <div class="notable-days" id="notable-days">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- Detail Section (Right) -->
    <div class="detail-section" id="detail-section">
        <div class="detail-header">
            <span class="detail-date" id="detail-date">Select a day</span>
            <div class="detail-nav">
                <button onclick="navigateDay(-1)" title="Previous day">&larr;</button>
                <button onclick="navigateDay(1)" title="Next day">&rarr;</button>
            </div>
        </div>

        <div class="detail-content">
            <!-- Metrics Grid -->
            <div class="metrics-grid" id="metrics-grid">
                <!-- Cards populated by JS -->
            </div>

            <!-- Habits Sidebar -->
            <div class="habits-panel" id="habits-panel">
                <h3 class="habits-panel-title">Habits</h3>
                <div class="habits-list" id="habits-list">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/static/js/habit-config.js"></script>
<script src="/static/js/daily.js"></script>
{% endblock %}
